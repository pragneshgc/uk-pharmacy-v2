import{n as a}from"./app-a3e6dddd.js";const n={name:"NotesPopup",props:{notes:{type:Object,default:{critical:[],information:[],other:[],correspondence:[],alerts:[]}},prescription:{type:Object,default:{Notes:""}},locked:{type:Boolean,default:!1}},data(){return{userInfo,activeTab:userInfo.role==30?"notes":"order",showEditHistoryFor:[]}},methods:{deleteNote(o){this.$swal({title:"Delete Note",html:"Are you sure you want to delete this note?",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff5151",cancelButtonColor:"#d33",confirmButtonText:"Yes!"}).then(t=>{t.value&&axios.post("/note/"+o+"/delete").then(s=>{this.postSuccess(s.data.message)}).catch(s=>{this.postError(s.response.data.message)}).finally(()=>{this.$root.$emit("prescriptionpool.getnotes")})})},openNote(o=!1){this.$root.$emit("modal.close","quicktraynotes"),this.$root.$emit("modal.open","note",o)},showEditHistory(o){this.showEditHistoryFor.includes(o)?this.showEditHistoryFor.splice(this.showEditHistoryFor.indexOf(o),1):this.showEditHistoryFor.push(o)}}};var r=function(){var t=this,s=t._self._c;return s("div",{staticClass:"medicineDetails",staticStyle:{width:"100%",padding:"0",height:"100%"}},[s("ul",{staticClass:"tabs"},[s("li",{class:{active:t.activeTab=="notes"},staticStyle:{"margin-left":"0!important"},attrs:{title:"Relates to allergies, medical conditions and notes added by pharmacists."},on:{click:function(e){t.activeTab="notes"}}},[s("a",{staticClass:"danger",attrs:{href:"javascript:;"}},[t._v("Patient Notes "),t.notes.critical.length>0?s("span",{staticClass:"badge red"},[t._v(t._s(t.notes.critical.length))]):t._e()])]),s("li",{class:{active:t.activeTab=="patient"},attrs:{title:"Relates communication with perscriber and notes sent with perscription"},on:{click:function(e){t.activeTab="patient"}}},[s("a",{attrs:{href:"javascript:;"}},[t._v("Queried Notes "),t.notes.correspondence.length+t.notes.information.length>0?s("span",{staticClass:"badge red"},[t._v(t._s(t.notes.correspondence.length+t.notes.information.length))]):t._e()])]),s("li",{class:{active:t.activeTab=="order"},attrs:{title:"Relates to the current order"},on:{click:function(e){t.activeTab="order"}}},[s("a",{attrs:{href:"javascript:;"}},[t._v("Order Notes "),(t.notes.other.length||t.prescription.Notes!=""&&t.prescription.Notes!=null)>0?s("span",{staticClass:"badge red"},[t._v(" "+t._s(t.notes.other.length+(t.prescription.Notes!=""&&t.prescription.Notes!=null?1:0))+" ")]):t._e()])]),t.locked?t._e():s("li",{staticStyle:{"margin-right":"0!important"},attrs:{title:"Add new note"},on:{click:function(e){return t.openNote()}}},[t._m(0)])]),t.activeTab=="notes"?s("div",{staticClass:"content"},[t.notes.critical.length>0?s("ul",{staticClass:"critical"},t._l(t.notes.critical,function(e){return s("li",{key:e.NoteID,staticClass:"note",class:[e.DeletedAt!=null||e.EditedAt!=null?"deleted":""]},[s("div",{staticClass:"note-body",domProps:{innerHTML:t._s(e.Note)}}),s("div",{staticClass:"note-footer"},[s("span",[t._v(t._s(e.name)+" "+t._s(e.surname))]),s("span",[t._v(t._s(e.CreatedAt))])]),e.DeletedAt!=null?s("div",{staticClass:"note-footer",staticStyle:{color:"red"}},[s("span",[t._v("Deleted By "+t._s(e.DeletedName)+" "+t._s(e.DeletedSurname))]),s("span",[t._v(t._s(e.DeletedAt))])]):t._e(),e.EditedAt!=null?s("div",{staticClass:"note-footer",staticStyle:{color:"#ff8944"}},[s("span",[t._v("Edited By "+t._s(e.EditedName)+" "+t._s(e.EditedSurname))]),s("span",[t._v(t._s(e.EditedAt))])]):t._e(),t.userInfo.role>=20&&e.DeletedAt==null&&e.EditedAt==null?s("div",{staticClass:"note-footer"},[s("div",[e.Edits.length>0&&t.userInfo.role>=50?s("b",{staticClass:"clickable",staticStyle:{color:"#ff8944"},on:{click:function(i){return t.showEditHistory(e.NoteID)}}},[t.showEditHistoryFor.includes(e.NoteID)?s("span",[t._v("Hide Edit History")]):s("span",[t._v("Show Edit History")])]):t._e()]),s("div",[t.userInfo.role>=50||e.UserID==t.userInfo.id?s("button",{staticClass:"smallTextBtn secondaryBtn",staticStyle:{"font-size":"12px",cursor:"pointer"},on:{click:function(i){return t.deleteNote(e.NoteID)}}},[t._v("Delete")]):t._e(),e.UserID==t.userInfo.id?s("button",{staticClass:"smallTextBtn secondaryBtn",staticStyle:{"font-size":"12px",cursor:"pointer"},on:{click:function(i){return t.openNote(e)}}},[t._v("Edit")]):t._e()])]):t.userInfo.role>=50&&e.DeletedAt!=null?s("div",{staticClass:"note-footer"},[e.Edits.length>0&&t.userInfo.role>=50?s("b",{staticClass:"clickable",staticStyle:{color:"#ff8944"},on:{click:function(i){return t.showEditHistory(e.NoteID)}}},[t.showEditHistoryFor.includes(e.NoteID)?s("span",[t._v("Hide Edit History")]):s("span",[t._v("Show Edit History")])]):t._e()]):t._e(),t.showEditHistoryFor.includes(e.NoteID)?s("div",{staticClass:"note-footer"},[s("ul",{staticClass:"critical",staticStyle:{width:"100%"}},t._l(e.Edits,function(i){return s("li",{key:i.NoteID,staticClass:"note"},[s("div",{staticClass:"note-body",domProps:{innerHTML:t._s(i.Note)}}),s("div",{staticClass:"note-footer"},[s("span",[t._v(t._s(i.name)+" "+t._s(i.surname))]),s("span",[t._v(t._s(i.CreatedAt))])]),s("div",{staticClass:"note-footer",staticStyle:{color:"#ff8944"}},[s("span",[t._v("Edited By "+t._s(i.EditedName)+" "+t._s(i.EditedSurname))]),s("span",[t._v(t._s(i.EditedAt))])])])}),0)]):t._e()])}),0):s("ul",[s("li",[t._v("No patient notes found")])])]):t._e(),t.activeTab=="patient"?s("div",{staticClass:"content"},[t.notes.information.length>0?s("ul",{staticClass:"medical"},t._l(t.notes.information,function(e){return s("li",{key:e.NoteID,staticClass:"note",class:[e.DeletedAt!=null||e.EditedAt!=null?"deleted":""]},[s("div",{staticClass:"note-body",domProps:{innerHTML:t._s(e.Note)}}),s("div",{staticClass:"note-footer"},[s("span",[t._v(t._s(e.name)+" "+t._s(e.surname))]),s("span",[t._v(t._s(e.CreatedAt))])]),e.DeletedAt!=null?s("div",{staticClass:"note-footer",staticStyle:{color:"red"}},[s("span",[t._v("Deleted By "+t._s(e.DeletedName)+" "+t._s(e.DeletedSurname))]),s("span",[t._v(t._s(e.DeletedAt))])]):t._e(),e.EditedAt!=null?s("div",{staticClass:"note-footer",staticStyle:{color:"#ff8944"}},[s("span",[t._v("Edited By "+t._s(e.EditedName)+" "+t._s(e.EditedSurname))]),s("span",[t._v(t._s(e.EditedAt))])]):t._e(),t.userInfo.role>=20&&e.DeletedAt==null&&e.EditedAt==null?s("div",{staticClass:"note-footer"},[s("div",[e.Edits.length>0&&t.userInfo.role>=50?s("b",{staticClass:"clickable",staticStyle:{color:"#ff8944"},on:{click:function(i){return t.showEditHistory(e.NoteID)}}},[t.showEditHistoryFor.includes(e.NoteID)?s("span",[t._v("Hide Edit History")]):s("span",[t._v("Show Edit History")])]):t._e()]),s("div",[t.userInfo.role>=50||e.UserID==t.userInfo.id?s("button",{staticClass:"smallTextBtn secondaryBtn",staticStyle:{"font-size":"12px",cursor:"pointer"},on:{click:function(i){return t.deleteNote(e.NoteID)}}},[t._v("Delete")]):t._e(),e.UserID==t.userInfo.id?s("button",{staticClass:"smallTextBtn secondaryBtn",staticStyle:{"font-size":"12px",cursor:"pointer"},on:{click:function(i){return t.openNote(e)}}},[t._v("Edit")]):t._e()])]):t.userInfo.role>=50&&e.DeletedAt!=null?s("div",{staticClass:"note-footer"},[e.Edits.length>0&&t.userInfo.role>=50?s("b",{staticClass:"clickable",staticStyle:{color:"#ff8944"},on:{click:function(i){return t.showEditHistory(e.NoteID)}}},[t.showEditHistoryFor.includes(e.NoteID)?s("span",[t._v("Hide Edit History")]):s("span",[t._v("Show Edit History")])]):t._e()]):t._e(),t.showEditHistoryFor.includes(e.NoteID)?s("div",{staticClass:"note-footer"},[s("ul",{staticClass:"medical",staticStyle:{width:"100%"}},t._l(e.Edits,function(i){return s("li",{key:i.NoteID,staticClass:"note"},[s("div",{staticClass:"note-body",domProps:{innerHTML:t._s(i.Note)}}),s("div",{staticClass:"note-footer"},[s("span",[t._v(t._s(i.name)+" "+t._s(i.surname))]),s("span",[t._v(t._s(i.CreatedAt))])]),s("div",{staticClass:"note-footer",staticStyle:{color:"#ff8944"}},[s("span",[t._v("Edited By "+t._s(i.EditedName)+" "+t._s(i.EditedSurname))]),s("span",[t._v(t._s(i.EditedAt))])])])}),0)]):t._e()])}),0):t._e(),t.notes.correspondence.length>0?s("ul",{staticClass:"other"},t._l(t.notes.correspondence,function(e){return s("li",{key:e.NoteID,staticClass:"note"},[s("div",{staticClass:"note-header",domProps:{innerHTML:t._s(e.Subject)}}),s("hr"),s("div",{staticClass:"note-body",domProps:{innerHTML:t._s(e.Message)}}),s("hr"),s("div",{staticClass:"note-footer"},[s("span",[t._v(t._s(e.Name)+" "+t._s(e.Surname))]),s("span",[t._v(t._s(e.Date)+" ")])])])}),0):t._e(),t.notes.correspondence.length==0&&t.notes.information.length==0?s("ul",[s("li",[t._v("No queried notes found")])]):t._e()]):t._e(),t.activeTab=="order"?s("div",{staticClass:"content"},[t.prescription.Notes!=""&&t.prescription.Notes!=null?s("ul",{staticClass:"other"},[s("li",{staticClass:"note"},[s("div",{staticClass:"note-body",domProps:{innerHTML:t._s(t.prescription.Notes)}}),s("div",{staticClass:"note-footer"})])]):t._e(),t.notes.other.length>0?s("ul",{staticClass:"other"},t._l(t.notes.other,function(e){return s("li",{key:e.NoteID,staticClass:"note",class:[e.DeletedAt!=null||e.EditedAt!=null?"deleted":""]},[s("div",{staticClass:"note-body",domProps:{innerHTML:t._s(e.Note)}}),s("div",{staticClass:"note-footer"},[s("span",[t._v(t._s(e.name)+" "+t._s(e.surname))]),s("span",[t._v(t._s(e.CreatedAt))])]),e.DeletedAt!=null?s("div",{staticClass:"note-footer",staticStyle:{color:"red"}},[s("span",[t._v("Deleted By "+t._s(e.DeletedName)+" "+t._s(e.DeletedSurname))]),s("span",[t._v(t._s(e.DeletedAt))])]):t._e(),e.EditedAt!=null?s("div",{staticClass:"note-footer",staticStyle:{color:"#ff8944"}},[s("span",[t._v("Edited By "+t._s(e.EditedName)+" "+t._s(e.EditedSurname))]),s("span",[t._v(t._s(e.EditedAt))])]):t._e(),t.userInfo.role>=20&&e.DeletedAt==null&&e.EditedAt==null?s("div",{staticClass:"note-footer"},[s("div",[e.Edits.length>0&&t.userInfo.role>=50?s("b",{staticClass:"clickable",staticStyle:{color:"#ff8944"},on:{click:function(i){return t.showEditHistory(e.NoteID)}}},[t.showEditHistoryFor.includes(e.NoteID)?s("span",[t._v("Hide Edit History")]):s("span",[t._v("Show Edit History")])]):t._e()]),s("div",[t.userInfo.role>=50||e.UserID==t.userInfo.id?s("button",{staticClass:"smallTextBtn secondaryBtn",staticStyle:{"font-size":"12px",cursor:"pointer"},on:{click:function(i){return t.deleteNote(e.NoteID)}}},[t._v("Delete")]):t._e(),e.UserID==t.userInfo.id?s("button",{staticClass:"smallTextBtn secondaryBtn",staticStyle:{"font-size":"12px",cursor:"pointer"},on:{click:function(i){return t.openNote(e)}}},[t._v("Edit")]):t._e()])]):t.userInfo.role>=50&&e.DeletedAt!=null?s("div",{staticClass:"note-footer"},[e.Edits.length>0&&t.userInfo.role>=50?s("b",{staticClass:"clickable",staticStyle:{color:"#ff8944"},on:{click:function(i){return t.showEditHistory(e.NoteID)}}},[t.showEditHistoryFor.includes(e.NoteID)?s("span",[t._v("Hide Edit History")]):s("span",[t._v("Show Edit History")])]):t._e()]):t._e(),t.showEditHistoryFor.includes(e.NoteID)?s("div",{staticClass:"note-footer"},[s("ul",{staticClass:"other",staticStyle:{width:"100%"}},t._l(e.Edits,function(i){return s("li",{key:i.NoteID,staticClass:"note"},[s("div",{staticClass:"note-body",domProps:{innerHTML:t._s(i.Note)}}),s("div",{staticClass:"note-footer"},[s("span",[t._v(t._s(i.name)+" "+t._s(i.surname))]),s("span",[t._v(t._s(i.CreatedAt))])]),s("div",{staticClass:"note-footer",staticStyle:{color:"#ff8944"}},[s("span",[t._v("Edited By "+t._s(i.EditedName)+" "+t._s(i.EditedSurname))]),s("span",[t._v(t._s(i.EditedAt))])])])}),0)]):t._e()])}),0):t._e(),(t.prescription.Notes==""||t.prescription.Notes==null)&&t.notes.other.length==0?s("ul",[s("li",[t._v("No order notes found")])]):t._e()]):t._e()])},l=[function(){var o=this,t=o._self._c;return t("a",{attrs:{href:"javascript:;"}},[t("i",{staticClass:"fa fa-plus"})])}],c=a(n,r,l,!1,null,null,null,null);const _=c.exports;export{_ as default};
