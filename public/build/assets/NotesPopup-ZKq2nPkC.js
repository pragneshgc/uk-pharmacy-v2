import{_ as k,o as s,c as o,a as t,n as y,g as f,t as l,b as r,F as _,f as h}from"./app-82NRaNNR.js";const E={name:"NotesPopup",props:{notes:{type:Object,default:{critical:[],information:[],other:[],correspondence:[],alerts:[]}},prescription:{type:Object,default:{Notes:""}},locked:{type:Boolean,default:!1}},data(){return{userInfo,activeTab:userInfo.role==30?"notes":"order",showEditHistoryFor:[]}},methods:{deleteNote(a){this.$swal({title:"Delete Note",html:"Are you sure you want to delete this note?",type:"warning",showCancelButton:!0,confirmButtonColor:"#ff5151",cancelButtonColor:"#d33",confirmButtonText:"Yes!"}).then(u=>{u.value&&axios.post("/note/"+a+"/delete").then(c=>{this.postSuccess(c.data.message)}).catch(c=>{this.postError(c.response.data.message)}).finally(()=>{this.emitter.emit("prescriptionpool.getnotes")})})},openNote(a=!1){this.emitter.emit("modal.close","quicktraynotes"),this.emitter.emit("modal.open","note",a)},showEditHistory(a){this.showEditHistoryFor.includes(a)?this.showEditHistoryFor.splice(this.showEditHistoryFor.indexOf(a),1):this.showEditHistoryFor.push(a)}}},v={class:"medicineDetails",style:{width:"100%",padding:"0",height:"100%"}},m={class:"tabs"},N={class:"danger",href:"javascript:;"},p={key:0,class:"badge red"},D={href:"javascript:;"},H={key:0,class:"badge red"},I={href:"javascript:;"},b={key:0,class:"badge red"},g=t("a",{href:"javascript:;"},[t("i",{class:"fa fa-plus"})],-1),C=[g],w={key:0,class:"content"},A={key:0,class:"critical"},T=["innerHTML"],B={class:"note-footer"},x={key:0,class:"note-footer",style:{color:"red"}},L={key:1,class:"note-footer",style:{color:"#ff8944"}},M={key:2,class:"note-footer"},S=["onClick"],F={key:0},j={key:1},z=["onClick"],U=["onClick"],O={key:3,class:"note-footer"},P=["onClick"],R={key:0},V={key:1},q={key:4,class:"note-footer"},Q={class:"critical",style:{width:"100%"}},Y=["innerHTML"],G={class:"note-footer"},J={class:"note-footer",style:{color:"#ff8944"}},K={key:1},W=t("li",null,"No patient notes found",-1),X=[W],Z={key:1,class:"content"},$={key:0,class:"medical"},ee=["innerHTML"],te={class:"note-footer"},se={key:0,class:"note-footer",style:{color:"red"}},oe={key:1,class:"note-footer",style:{color:"#ff8944"}},le={key:2,class:"note-footer"},ne=["onClick"],ie={key:0},re={key:1},ce=["onClick"],de=["onClick"],ue={key:3,class:"note-footer"},ae=["onClick"],_e={key:0},he={key:1},ye={key:4,class:"note-footer"},fe={class:"medical",style:{width:"100%"}},ke=["innerHTML"],Ee={class:"note-footer"},ve={class:"note-footer",style:{color:"#ff8944"}},me={key:1,class:"other"},Ne=["innerHTML"],pe=t("hr",null,null,-1),De=["innerHTML"],He=t("hr",null,null,-1),Ie={class:"note-footer"},be={key:2},ge=t("li",null,"No queried notes found",-1),Ce=[ge],we={key:2,class:"content"},Ae={key:0,class:"other"},Te={class:"note"},Be=["innerHTML"],xe=t("div",{class:"note-footer"},null,-1),Le={key:1,class:"other"},Me=["innerHTML"],Se={class:"note-footer"},Fe={key:0,class:"note-footer",style:{color:"red"}},je={key:1,class:"note-footer",style:{color:"#ff8944"}},ze={key:2,class:"note-footer"},Ue=["onClick"],Oe={key:0},Pe={key:1},Re=["onClick"],Ve=["onClick"],qe={key:3,class:"note-footer"},Qe=["onClick"],Ye={key:0},Ge={key:1},Je={key:4,class:"note-footer"},Ke={class:"other",style:{width:"100%"}},We=["innerHTML"],Xe={class:"note-footer"},Ze={class:"note-footer",style:{color:"#ff8944"}},$e={key:2},et=t("li",null,"No order notes found",-1),tt=[et];function st(a,u,c,ot,n,d){return s(),o("div",v,[t("ul",m,[t("li",{style:{"margin-left":"0!important"},title:"Relates to allergies, medical conditions and notes added by pharmacists.",class:y({active:n.activeTab=="notes"}),onClick:u[0]||(u[0]=e=>n.activeTab="notes")},[t("a",N,[f("Patient Notes "),c.notes.critical.length>0?(s(),o("span",p,l(c.notes.critical.length),1)):r("",!0)])],2),t("li",{title:"Relates communication with perscriber and notes sent with perscription",class:y({active:n.activeTab=="patient"}),onClick:u[1]||(u[1]=e=>n.activeTab="patient")},[t("a",D,[f("Queried Notes "),c.notes.correspondence.length+c.notes.information.length>0?(s(),o("span",H,l(c.notes.correspondence.length+c.notes.information.length),1)):r("",!0)])],2),t("li",{title:"Relates to the current order",class:y({active:n.activeTab=="order"}),onClick:u[2]||(u[2]=e=>n.activeTab="order")},[t("a",I,[f("Order Notes "),(c.notes.other.length||c.prescription.Notes!=""&&c.prescription.Notes!=null)>0?(s(),o("span",b,l(c.notes.other.length+(c.prescription.Notes!=""&&c.prescription.Notes!=null?1:0)),1)):r("",!0)])],2),c.locked?r("",!0):(s(),o("li",{key:0,style:{"margin-right":"0!important"},title:"Add new note",onClick:u[3]||(u[3]=e=>d.openNote())},C))]),n.activeTab=="notes"?(s(),o("div",w,[c.notes.critical.length>0?(s(),o("ul",A,[(s(!0),o(_,null,h(c.notes.critical,e=>(s(),o("li",{class:y(["note",[e.DeletedAt!=null||e.EditedAt!=null?"deleted":""]]),key:e.NoteID},[t("div",{class:"note-body",innerHTML:e.Note},null,8,T),t("div",B,[t("span",null,l(e.name)+" "+l(e.surname),1),t("span",null,l(e.CreatedAt),1)]),e.DeletedAt!=null?(s(),o("div",x,[t("span",null,"Deleted By "+l(e.DeletedName)+" "+l(e.DeletedSurname),1),t("span",null,l(e.DeletedAt),1)])):r("",!0),e.EditedAt!=null?(s(),o("div",L,[t("span",null,"Edited By "+l(e.EditedName)+" "+l(e.EditedSurname),1),t("span",null,l(e.EditedAt),1)])):r("",!0),n.userInfo.role>=20&&e.DeletedAt==null&&e.EditedAt==null?(s(),o("div",M,[t("div",null,[e.Edits.length>0&&n.userInfo.role>=50?(s(),o("b",{key:0,class:"clickable",onClick:i=>d.showEditHistory(e.NoteID),style:{color:"#ff8944"}},[n.showEditHistoryFor.includes(e.NoteID)?(s(),o("span",F,"Hide Edit History")):(s(),o("span",j,"Show Edit History"))],8,S)):r("",!0)]),t("div",null,[n.userInfo.role>=50||e.UserID==n.userInfo.id?(s(),o("button",{key:0,onClick:i=>d.deleteNote(e.NoteID),class:"smallTextBtn secondaryBtn",style:{"font-size":"12px",cursor:"pointer"}},"Delete",8,z)):r("",!0),e.UserID==n.userInfo.id?(s(),o("button",{key:1,onClick:i=>d.openNote(e),class:"smallTextBtn secondaryBtn",style:{"font-size":"12px",cursor:"pointer"}},"Edit",8,U)):r("",!0)])])):n.userInfo.role>=50&&e.DeletedAt!=null?(s(),o("div",O,[e.Edits.length>0&&n.userInfo.role>=50?(s(),o("b",{key:0,class:"clickable",onClick:i=>d.showEditHistory(e.NoteID),style:{color:"#ff8944"}},[n.showEditHistoryFor.includes(e.NoteID)?(s(),o("span",R,"Hide Edit History")):(s(),o("span",V,"Show Edit History"))],8,P)):r("",!0)])):r("",!0),n.showEditHistoryFor.includes(e.NoteID)?(s(),o("div",q,[t("ul",Q,[(s(!0),o(_,null,h(e.Edits,i=>(s(),o("li",{class:"note",key:i.NoteID},[t("div",{class:"note-body",innerHTML:i.Note},null,8,Y),t("div",G,[t("span",null,l(i.name)+" "+l(i.surname),1),t("span",null,l(i.CreatedAt),1)]),t("div",J,[t("span",null,"Edited By "+l(i.EditedName)+" "+l(i.EditedSurname),1),t("span",null,l(i.EditedAt),1)])]))),128))])])):r("",!0)],2))),128))])):(s(),o("ul",K,X))])):r("",!0),n.activeTab=="patient"?(s(),o("div",Z,[c.notes.information.length>0?(s(),o("ul",$,[(s(!0),o(_,null,h(c.notes.information,e=>(s(),o("li",{class:y(["note",[e.DeletedAt!=null||e.EditedAt!=null?"deleted":""]]),key:e.NoteID},[t("div",{class:"note-body",innerHTML:e.Note},null,8,ee),t("div",te,[t("span",null,l(e.name)+" "+l(e.surname),1),t("span",null,l(e.CreatedAt),1)]),e.DeletedAt!=null?(s(),o("div",se,[t("span",null,"Deleted By "+l(e.DeletedName)+" "+l(e.DeletedSurname),1),t("span",null,l(e.DeletedAt),1)])):r("",!0),e.EditedAt!=null?(s(),o("div",oe,[t("span",null,"Edited By "+l(e.EditedName)+" "+l(e.EditedSurname),1),t("span",null,l(e.EditedAt),1)])):r("",!0),n.userInfo.role>=20&&e.DeletedAt==null&&e.EditedAt==null?(s(),o("div",le,[t("div",null,[e.Edits.length>0&&n.userInfo.role>=50?(s(),o("b",{key:0,class:"clickable",onClick:i=>d.showEditHistory(e.NoteID),style:{color:"#ff8944"}},[n.showEditHistoryFor.includes(e.NoteID)?(s(),o("span",ie,"Hide Edit History")):(s(),o("span",re,"Show Edit History"))],8,ne)):r("",!0)]),t("div",null,[n.userInfo.role>=50||e.UserID==n.userInfo.id?(s(),o("button",{key:0,onClick:i=>d.deleteNote(e.NoteID),class:"smallTextBtn secondaryBtn",style:{"font-size":"12px",cursor:"pointer"}},"Delete",8,ce)):r("",!0),e.UserID==n.userInfo.id?(s(),o("button",{key:1,onClick:i=>d.openNote(e),class:"smallTextBtn secondaryBtn",style:{"font-size":"12px",cursor:"pointer"}},"Edit",8,de)):r("",!0)])])):n.userInfo.role>=50&&e.DeletedAt!=null?(s(),o("div",ue,[e.Edits.length>0&&n.userInfo.role>=50?(s(),o("b",{key:0,class:"clickable",onClick:i=>d.showEditHistory(e.NoteID),style:{color:"#ff8944"}},[n.showEditHistoryFor.includes(e.NoteID)?(s(),o("span",_e,"Hide Edit History")):(s(),o("span",he,"Show Edit History"))],8,ae)):r("",!0)])):r("",!0),n.showEditHistoryFor.includes(e.NoteID)?(s(),o("div",ye,[t("ul",fe,[(s(!0),o(_,null,h(e.Edits,i=>(s(),o("li",{class:"note",key:i.NoteID},[t("div",{class:"note-body",innerHTML:i.Note},null,8,ke),t("div",Ee,[t("span",null,l(i.name)+" "+l(i.surname),1),t("span",null,l(i.CreatedAt),1)]),t("div",ve,[t("span",null,"Edited By "+l(i.EditedName)+" "+l(i.EditedSurname),1),t("span",null,l(i.EditedAt),1)])]))),128))])])):r("",!0)],2))),128))])):r("",!0),c.notes.correspondence.length>0?(s(),o("ul",me,[(s(!0),o(_,null,h(c.notes.correspondence,e=>(s(),o("li",{class:"note",key:e.NoteID},[t("div",{class:"note-header",innerHTML:e.Subject},null,8,Ne),pe,t("div",{class:"note-body",innerHTML:e.Message},null,8,De),He,t("div",Ie,[t("span",null,l(e.Name)+" "+l(e.Surname),1),t("span",null,l(e.Date),1)])]))),128))])):r("",!0),c.notes.correspondence.length==0&&c.notes.information.length==0?(s(),o("ul",be,Ce)):r("",!0)])):r("",!0),n.activeTab=="order"?(s(),o("div",we,[c.prescription.Notes!=""&&c.prescription.Notes!=null?(s(),o("ul",Ae,[t("li",Te,[t("div",{class:"note-body",innerHTML:c.prescription.Notes},null,8,Be),xe])])):r("",!0),c.notes.other.length>0?(s(),o("ul",Le,[(s(!0),o(_,null,h(c.notes.other,e=>(s(),o("li",{class:y(["note",[e.DeletedAt!=null||e.EditedAt!=null?"deleted":""]]),key:e.NoteID},[t("div",{class:"note-body",innerHTML:e.Note},null,8,Me),t("div",Se,[t("span",null,l(e.name)+" "+l(e.surname),1),t("span",null,l(e.CreatedAt),1)]),e.DeletedAt!=null?(s(),o("div",Fe,[t("span",null,"Deleted By "+l(e.DeletedName)+" "+l(e.DeletedSurname),1),t("span",null,l(e.DeletedAt),1)])):r("",!0),e.EditedAt!=null?(s(),o("div",je,[t("span",null,"Edited By "+l(e.EditedName)+" "+l(e.EditedSurname),1),t("span",null,l(e.EditedAt),1)])):r("",!0),n.userInfo.role>=20&&e.DeletedAt==null&&e.EditedAt==null?(s(),o("div",ze,[t("div",null,[e.Edits.length>0&&n.userInfo.role>=50?(s(),o("b",{key:0,class:"clickable",onClick:i=>d.showEditHistory(e.NoteID),style:{color:"#ff8944"}},[n.showEditHistoryFor.includes(e.NoteID)?(s(),o("span",Oe,"Hide Edit History")):(s(),o("span",Pe,"Show Edit History"))],8,Ue)):r("",!0)]),t("div",null,[n.userInfo.role>=50||e.UserID==n.userInfo.id?(s(),o("button",{key:0,onClick:i=>d.deleteNote(e.NoteID),class:"smallTextBtn secondaryBtn",style:{"font-size":"12px",cursor:"pointer"}},"Delete",8,Re)):r("",!0),e.UserID==n.userInfo.id?(s(),o("button",{key:1,onClick:i=>d.openNote(e),class:"smallTextBtn secondaryBtn",style:{"font-size":"12px",cursor:"pointer"}},"Edit",8,Ve)):r("",!0)])])):n.userInfo.role>=50&&e.DeletedAt!=null?(s(),o("div",qe,[e.Edits.length>0&&n.userInfo.role>=50?(s(),o("b",{key:0,class:"clickable",onClick:i=>d.showEditHistory(e.NoteID),style:{color:"#ff8944"}},[n.showEditHistoryFor.includes(e.NoteID)?(s(),o("span",Ye,"Hide Edit History")):(s(),o("span",Ge,"Show Edit History"))],8,Qe)):r("",!0)])):r("",!0),n.showEditHistoryFor.includes(e.NoteID)?(s(),o("div",Je,[t("ul",Ke,[(s(!0),o(_,null,h(e.Edits,i=>(s(),o("li",{class:"note",key:i.NoteID},[t("div",{class:"note-body",innerHTML:i.Note},null,8,We),t("div",Xe,[t("span",null,l(i.name)+" "+l(i.surname),1),t("span",null,l(i.CreatedAt),1)]),t("div",Ze,[t("span",null,"Edited By "+l(i.EditedName)+" "+l(i.EditedSurname),1),t("span",null,l(i.EditedAt),1)])]))),128))])])):r("",!0)],2))),128))])):r("",!0),(c.prescription.Notes==""||c.prescription.Notes==null)&&c.notes.other.length==0?(s(),o("ul",$e,tt)):r("",!0)])):r("",!0)])}const nt=k(E,[["render",st]]);export{nt as default};
//# sourceMappingURL=NotesPopup-ZKq2nPkC.js.map
