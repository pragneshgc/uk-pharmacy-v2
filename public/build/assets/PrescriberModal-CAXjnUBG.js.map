{"version":3,"file":"PrescriberModal-CAXjnUBG.js","sources":["../../../resources/assets/js/components/PrescriberModal.vue"],"sourcesContent":["<template>\n    <transition name=\"fade\">\n        <div class=\"esa-modal\" v-if=\"show.modal\">\n            <div v-if=\"backdrop\" class=\"backdrop\" @click=\"close()\">\n            </div>\n            <div class=\"modal\" id=\"draggable-div-prescriber\">\n                <transition name=\"fade\">\n                    <div class=\"loader\" v-show=\"loading\">Loading...</div>\n                </transition>\n\n                <div class=\"modal-header draggable-div-header\" id=\"draggable-div-header-prescriber\">\n                    <h3>Send Message</h3>\n                </div>\n                <div class=\"modal-body\">\n                    <form @submit=\"submit()\">\n                        <label for=\"message-select\">Email template <small class=\"danger\">(required)</small></label>\n                        <select v-model=\"prescriberForm.select\" name=\"message-select\" class=\"table-dropdown mb-10\">\n                            <option value=\"0\" disabled>Please select a template</option>\n                            <option v-for=\"option in prescriberForm.options\" :value=\"option.value\" :key=\"option.value\">\n                                {{\n                                    option.name }}</option>\n                        </select>\n\n                        <div class=\"mb-10\" v-if=\"prescriberForm.select == 3\">\n                            <label for=\"message-date\">New date <small class=\"danger\">(required)</small></label>\n                            <datepicker name=\"return-date\" v-model=\"prescriberForm.date\" :disabled-dates=\"disabledDates\"\n                                maxlength=\"30\"></datepicker>\n                        </div>\n\n                        <label for=\"message-text\">Message <small class=\"danger\">(required)</small></label>\n                        <!-- <textarea v-model=\"prescriberForm.message\" name=\"message-text\" cols=\"30\" rows=\"30\"> -->\n                        <Editor id=\"message\" v-model=\"prescriberForm.message\" />\n\n                        <div v-if=\"errors.length > 0\" class=\"infoBox error\">\n                            <p v-for=\"(value, key) in errors\" :key=\"key\">\n                                {{ value }}\n                            </p>\n                        </div>\n                    </form>\n                </div>\n                <div class=\"modal-footer\">\n                    <button :disabled=\"loading\" @click=\"close()\" class=\"btn btnSize01 secondaryBtn bigButton\">\n                        Cancel\n                    </button>\n                    <button :disabled=\"loading\" @click=\"submit()\" class=\"btn btnSize01 primaryBtn\">\n                        Submit\n                    </button>\n                </div>\n                <!-- <div v-if=\"loading\" class=\"loader\" style=\"\">Loading...</div> -->\n                <span class=\"backdrop-toggle\" @click=\"toggleBackdrop()\" title=\"Unfocus the modal\"><i\n                        class=\"fa fa-clone\"></i></span>\n                <span class=\"close\" @click=\"close()\" title=\"Close the modal\"><i class=\"fa fa-close\"></i></span>\n            </div>\n        </div>\n    </transition>\n</template>\n\n<script>\nimport Modal from './Modal.vue';\nimport Error from '../mixins/errors'\nimport Datepicker from './wrapper/Datepicker.vue'\nimport Editor from './wrapper/Editor.vue';\n\nexport default {\n    props: ['orderID'],\n    mixins: [Error],\n    extends: Modal,\n    components: {\n        Editor,\n        Datepicker\n    },\n    data: function () {\n        return {\n            prescriberForm: {\n                options: [\n                    { name: '[REJECT] Too many ordered', value: 1, limit: 30 },\n                    { name: '[REJECT] Dosage problem', value: 2, limit: 30 },\n                    // {name: '[POSTPONE] Ordered too early', value: 3, limit: 30},\n                    { name: '[QUERY] Miscellaneous', value: 4, limit: 30 },\n                    { name: '[QUERY] Dosage problem', value: 5, limit: 30 },\n                    { name: '[QUERY] Potential name discrepancy', value: 6, limit: 0 },\n                ],\n                select: 0,\n                message: '',\n                date: '',\n            },\n            disabledDates: {\n                to: new Date(),\n                days: [6, 0],\n            },\n            errors: [],\n            loading: false,\n            backdrop: true,\n        }\n    },\n    watch: {\n        'prescriberForm.select': function () {\n            if (this.prescriberForm.select != 3) {\n                this.prescriberForm.date = '';\n            }\n        },\n        'show.modal': function () {\n            setTimeout(() => {\n                if (this.show.modal && !this.dragEventTriggered && document.getElementById(\"draggable-div-prescriber\")) {\n                    dragElement(document.getElementById(\"draggable-div-prescriber\"));\n                    this.dragEventTriggered = true;\n\n                    function dragElement(elmnt) {\n                        var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n\n                        if (document.getElementById(\"draggable-div-header-prescriber\")) {\n                            /* if present, the header is where you move the DIV from:*/\n                            document.getElementById(\"draggable-div-header-prescriber\").onmousedown = dragMouseDown;\n                        } else {\n                            /* otherwise, move the DIV from anywhere inside the DIV:*/\n                            elmnt.onmousedown = dragMouseDown;\n                        }\n\n                        function dragMouseDown(e) {\n                            e = e || window.event;\n                            e.preventDefault();\n                            // get the mouse cursor position at startup:\n                            pos3 = e.clientX;\n                            pos4 = e.clientY;\n                            document.onmouseup = closeDragElement;\n                            // call a function whenever the cursor moves:\n                            document.onmousemove = elementDrag;\n                        }\n\n                        function elementDrag(e) {\n                            e = e || window.event;\n                            e.preventDefault();\n                            // calculate the new cursor position:\n                            pos1 = pos3 - e.clientX;\n                            pos2 = pos4 - e.clientY;\n                            pos3 = e.clientX;\n                            pos4 = e.clientY;\n                            // set the element's new position:\n                            elmnt.style.top = (elmnt.offsetTop - pos2) + \"px\";\n                            elmnt.style.left = (elmnt.offsetLeft - pos1) + \"px\";\n                        }\n\n                        function closeDragElement() {\n                            /* stop moving when mouse button is released:*/\n                            document.onmouseup = null;\n                            document.onmousemove = null;\n                        }\n                    }\n                } else {\n                    this.dragEventTriggered = false;\n                    this.backdrop = true;\n                }\n            }, 500);\n        },\n    },\n    methods: {\n        submit() {\n            this.loading = true;\n            axios.post('/mail/' + this.orderID + '/contact', { form: this.prescriberForm })\n                .then((response) => {\n                    this.postSuccess(response.data.message);\n                    // this.emitter.emit('orderupdate'); //this was causing an issue of doing refresh request for the old order\n                    this.emitter.emit('tray.remove', this.orderID); //remove from tray when queried\n                    this.resetForm();\n                    this.show.modal = false;\n                })\n                .catch((error) => {\n                    this.errors.push(error.response.data.message);\n                    this.postError(error.response.data.message);\n                })\n                .finally(() => {\n                    this.loading = false;\n                })\n        },\n        toggleBackdrop() {\n            this.backdrop = !this.backdrop;\n        },\n        resetForm() {\n            this.prescriberForm.select = 0;\n            this.prescriberForm.message = '';\n            this.prescriberForm.date = '';\n            this.errors = [];\n        }\n    }\n}\n</script>\n"],"names":["_sfc_main","Error","Modal","Editor","Datepicker","elmnt","pos1","pos2","pos3","pos4","dragMouseDown","e","closeDragElement","elementDrag","response","error","_hoisted_3","_createElementVNode","_hoisted_5","_createTextVNode","_hoisted_8","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_18","_createBlock","_Transition","_withCtx","_ctx","_openBlock","_createElementBlock","_hoisted_1","_createCommentVNode","_hoisted_2","_createVNode","_hoisted_4","$options","_hoisted_6","_cache","$event","_hoisted_7","_Fragment","_renderList","option","_vModelSelect","_hoisted_9","_hoisted_10","_component_datepicker","_hoisted_11","_component_Editor","_hoisted_12","value","key","_hoisted_17","_hoisted_19"],"mappings":"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"}