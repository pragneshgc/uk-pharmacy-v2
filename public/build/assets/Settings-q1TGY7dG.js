import{_ as S,E as k,o as i,c as n,a as e,n as d,b as a,F as m,f as h,t as p,w as u,B as f,A as v,I as y,g as T,k as _}from"./app-82NRaNNR.js";const I={mixins:[k],data(){return{activeTab:userInfo.role<50?"application":"settings",settings:[],companySettings:[],applicationSettings:localStorage.getItem("settings.application")?JSON.parse(localStorage.getItem("settings.application")):{labelPrinter:"ZDesigner GK420d",deliveryNotePrinter:""},types:{1:{name:"Records Per Page",enabled:!0,type:"number"},2:{name:"Delivery Options",enabled:!0,type:"text"},3:{name:"Dispenser Limit",enabled:!0,type:"number"},5:{name:"PXP Status (LIVE or OFF)",enabled:!1,type:"switch"},900:{name:"Hidden",enabled:!1,type:"text"}},hiddenFields:["ClientID"],userInfo,errors:{},update:{},companySettingsUpdate:{},file:"",status:"",importing:!1,printAppOnline:!1}},computed:{globalSettings(){return this.settings.filter(l=>l.Type!=2)},deliveryOptions(){return this.settings.filter(l=>l.Type==2)},inputText(){return this.file!=""?this.file.name:"Upload XML"},buttonText(){return this.file!=""?"Importing":"Upload"}},mounted(){this.getSettings(),this.getCompanySettings(),this.getPrinterList()},methods:{getSettings(){axios.get("/settings").then(l=>{this.settings=l.data.data,this.settings.forEach(o=>{this.update[o.SettingID]=o.Value})}).catch(l=>{this.postError(l.data.data)})},getCompanySettings(){axios.get("/settings/company").then(l=>{this.companySettings=l.data.data,this.companySettingsUpdate=JSON.parse(JSON.stringify(this.companySettings))}).catch(l=>{this.postError(l.data.data)})},getPrinterList(){axios.get("http://localhost:63020").then(l=>{this.printAppOnline=l.data}).catch(l=>{this.printAppOnline=!1})},updateApplicationSettings(){this.$swal({title:"Are you sure you want to update local application settings?",text:"Make sure the values you are changing are correct!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update local application settings!"}).then(l=>{l.value&&(localStorage.setItem("settings.application",JSON.stringify(this.applicationSettings)),this.postSuccess("Application settings updated!"))})},updateGlobalSettings(){this.$swal({title:"Are you sure you want to update global application settings?",text:"Make sure the values you are changing are correct!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update global application settings!"}).then(l=>{l.value&&axios.patch("/settings",this.update).then(o=>{this.postSuccess("Global settings updated!")}).catch(o=>{this.postError(o.data.data)})})},updateCompanySettings(){this.$swal({title:"Are you sure you want to update company settings?",text:"Make sure the values you are changing are correct!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update company settings!"}).then(l=>{l.value&&axios.patch("/settings/company",this.companySettingsUpdate).then(o=>{this.postSuccess("Company settings updated!")}).catch(o=>{this.postError(o.data.data)})})},inputClick(){document.getElementById("file").click()},attachFile(){let l=document.getElementById("file").files;l.length&&(this.file=l[0])},upload(){this.importing=!0;let l=new FormData;l.append("file",this.file),l.append("option",this.option),axios.post("/import/xml",l,{headers:{"Content-type":"multipart/form-data"}}).then(o=>{this.status=o.data.message,this.postSuccess("XML imported successfully"),document.getElementById("file").value=""}).catch(o=>{this.postError(o.response.data.message),document.getElementById("file").value=""}).finally(()=>{this.file="",this.importing=!1})}}},E={class:"content"},x={class:"card"},C=e("div",{class:"card-header"},[e("h3",null,"Settings")],-1),D={class:"card-body"},P={class:"settings"},w={class:"tabs"},N=e("a",{class:"danger",href:"javascript:;"},"Global Settings",-1),A=[N],B=e("a",{href:"javascript:;"},"Delivery Settings ",-1),L=[B],O=e("a",{href:"javascript:;"},"Company Details ",-1),M=[O],U=e("a",{href:"javascript:;"},"Manual XML Import",-1),F=[U],V=e("a",{href:"javascript:;"},"Local Settings",-1),H=[V],z=e("a",{href:"javascript:;"},"Documents",-1),Y=[z],G=e("a",{href:"javascript:;"},"Dev Sites",-1),j=[G],R={key:0,class:"content pxp-form"},X=e("p",{class:"mb-10"}," These settings affect how many records are shown per page, how many orders a dispenser can assign to themselves, etc. ",-1),J=e("p",{class:"mb-10"},[e("b",null,"These are global settings and affect all users!")],-1),K=e("hr",{class:"mb-10"},null,-1),W={class:"form-column"},Z=["for"],q=["disabled","onUpdate:modelValue","type","name","placeholder"],Q={key:0,class:"invalid-feedback d-block"},$={class:"form-group form-group-2"},ee={key:1,class:"content pxp-form"},te=e("p",{class:"mb-10"}," These settings affect the API connection with various delivery companies ",-1),se=e("p",{class:"mb-10"},[e("b",null,"These are global settings and affect the entire application!")],-1),oe=e("hr",{class:"mb-10"},null,-1),ie=["for"],ne=["onUpdate:modelValue","type","name","placeholder"],le={key:0,class:"invalid-feedback d-block"},ae={class:"form-group form-group-2"},re={key:2,class:"content pxp-form pxp-form-long"},ce=e("div",{class:"infoBox warning mb-10"}," THIS IS THE MAIN COMPANY DETAIL. IF YOU MAKE CHANGES HERE IT WILL AFFECT THE SYSTEM I.E. DELIVERY NOTE ",-1),pe=["for"],de=["onUpdate:modelValue","name","placeholder"],ue={key:0,class:"invalid-feedback d-block"},me={class:"form-group form-group-2"},he={key:3,class:"content"},ge=e("div",{class:"infoBox warning"}," PLEASE, DOUBLE CHECK THE XML DATA BEFORE IMPORTING! ",-1),fe={class:"input-container mt-20"},ve={class:"browse-btn"},ye={class:"file-info"},_e=["innerHTML"],be={class:"text-center"},Se=["disabled"],ke={key:0,class:"loader",style:{}},Te={key:1},Ie={key:4,class:"content pxp-form"},Ee=e("p",{class:"mb-10"}," Make sure the name of the printer is same as reported by system. If not the application will use the systems default printer. ",-1),xe=e("p",{class:"mb-10"},[e("b",null,"These settings only affect the local PC, and any user using the local PC")],-1),Ce=e("hr",{class:"mb-10"},null,-1),De={class:"form-column"},Pe={key:0,class:"form-group form-group-2"},we=e("label",{for:"labelPrinter"},"Label Printer",-1),Ne={key:1,class:"form-group form-group-2"},Ae=e("label",{for:"labelPrinter"},"Label Printer",-1),Be=e("option",{value:""},"Default",-1),Le=["value"],Oe={key:2,class:"form-group form-group-2"},Me=e("label",{for:"deliveryNotePrinter"},"Delivery Note Printer",-1),Ue={key:3,class:"form-group form-group-2"},Fe=e("label",{for:"labelPrinter"},"Delivery Note Printer",-1),Ve=e("option",{value:""},"Default",-1),He=["value"],ze={class:"form-group form-group-2"},Ye={key:4,class:"mb-10"},Ge={key:5,class:"form-group form-group-2"},je=e("a",{href:"/download/printer"},[e("button",{class:"btn btnSize02 secondaryBtn"},[T(" Download printer application "),e("small",null,"(0.3.0)")])],-1),Re=[je],Xe={key:5,class:"content pxp-form"},Je=_('<p class="mb-10"> Below you can download or view any pharmacy related document </p><hr><br><ul class="list-group"><li class="list-group-item"><p>Blank Pathology Form (<a target="_blank" href="/download/form">download</a>/<a target="_blank" href="/view/form">view</a>)</p></li></ul>',4),Ke=[Je],We={key:6,class:"content pxp-form"},Ze=_('<p class="mb-10"> Below is a list of all active dev sites </p><hr><br><ul class="list-group"><li class="list-group-item"><a href="https://old.esasys.co.uk">old.esasys.co.uk - Old ESA</a></li><li class="list-group-item"><a href="https://dev.esasys.co.uk">dev.esasys.co.uk - Old ESA Dev</a></li><li class="list-group-item"><a href="https://pharmacist.4sm-dev.xyz/">pharmacist.4sm-dev.xyz - ESA Dev</a></li><li class="list-group-item"><a href="https://inventory.4sm-dev.xyz">inventory.4sm-dev.xyz - Inventory Dev</a></li><li class="list-group-item"><a href="https://pxp.4sm-dev.xyz">pxp.4sm-dev.xyz - PXP Dev</a></li></ul>',4),qe=[Ze];function Qe(l,o,$e,et,t,c){return i(),n("div",E,[e("section",x,[C,e("div",D,[e("div",P,[e("ul",w,[t.userInfo.role>=50?(i(),n("li",{key:0,style:{"margin-left":"0!important"},title:"Global settings applied across the application.",class:d({active:t.activeTab=="settings"}),onClick:o[0]||(o[0]=s=>t.activeTab="settings")},A,2)):a("",!0),t.userInfo.role>=50?(i(),n("li",{key:1,title:"Delivery settings applied across all orders",class:d({active:t.activeTab=="delivery"}),onClick:o[1]||(o[1]=s=>t.activeTab="delivery")},L,2)):a("",!0),t.userInfo.role>=50?(i(),n("li",{key:2,title:"THIS IS THE MAIN COMPANY DETAIL. IF YOU MAKE CHANGES HERE IT WILL AFFECT THE SYSTEM I.E. DELIVERY NOTE",class:d({active:t.activeTab=="details"}),onClick:o[2]||(o[2]=s=>t.activeTab="details")},M,2)):a("",!0),t.userInfo.role>=50?(i(),n("li",{key:3,title:"Manual XML Import",class:d({active:t.activeTab=="import"}),onClick:o[3]||(o[3]=s=>t.activeTab="import")},F,2)):a("",!0),e("li",{title:"Local Application Settings",class:d({active:t.activeTab=="application"}),onClick:o[4]||(o[4]=s=>t.activeTab="application")},H,2),e("li",{title:"Local Application Settings",class:d({active:t.activeTab=="downloads"}),onClick:o[5]||(o[5]=s=>t.activeTab="downloads")},Y,2),t.userInfo.role>=50?(i(),n("li",{key:4,title:"Dev Sites",class:d({active:t.activeTab=="devsites"}),onClick:o[6]||(o[6]=s=>t.activeTab="devsites")},j,2)):a("",!0)]),t.activeTab=="settings"?(i(),n("div",R,[X,J,K,e("div",W,[(i(!0),n(m,null,h(c.globalSettings,s=>{var r,g;return i(),n("div",{class:"form-group form-group-2",key:s.SettingID},[e("label",{for:s.SettingID},p(s.Name),9,Z),u(e("input",{disabled:!((r=t.types[s.Type])!=null&&r.enabled),"onUpdate:modelValue":b=>t.update[s.SettingID]=b,type:(g=t.types[s.Type])==null?void 0:g.type,name:s.SettingID,class:"form-control mb-3",placeholder:s.Name},null,8,q),[[y,t.update[s.SettingID]]]),t.errors[s.Name]?(i(),n("div",Q,p(t.errors[s.Name][0]),1)):a("",!0)])}),128))]),e("div",$,[e("button",{class:"btn btnSize02 secondaryBtn",onClick:o[7]||(o[7]=s=>c.updateGlobalSettings())}," Update ")])])):a("",!0),t.activeTab=="delivery"?(i(),n("div",ee,[te,se,oe,(i(!0),n(m,null,h(c.deliveryOptions,s=>(i(),n("div",{class:"form-group form-group-2",key:s.SettingID},[e("label",{for:s.SettingID},p(s.Name),9,ie),u(e("input",{"onUpdate:modelValue":r=>t.update[s.SettingID]=r,type:t.types[s.Type].type,name:s.SettingID,class:"form-control mb-3",placeholder:s.Name},null,8,ne),[[y,t.update[s.SettingID]]]),t.errors[s.Name]?(i(),n("div",le,p(t.errors[s.Name][0]),1)):a("",!0)]))),128)),e("div",ae,[e("button",{class:"btn btnSize02 secondaryBtn",onClick:o[8]||(o[8]=s=>c.updateGlobalSettings())}," Update ")])])):a("",!0),t.activeTab=="details"?(i(),n("div",re,[ce,t.hiddenFields.includes(l.key)?a("",!0):(i(!0),n(m,{key:0},h(t.companySettingsUpdate,(s,r)=>(i(),n("div",{class:"form-group form-group-2",style:{width:"50%"},key:r},[e("label",{for:r},p(r),9,pe),u(e("input",{"onUpdate:modelValue":g=>t.companySettingsUpdate[r]=g,name:r,class:"form-control mb-3",placeholder:r},null,8,de),[[f,t.companySettingsUpdate[r]]]),t.errors[r]?(i(),n("div",ue,p(t.errors[r][0]),1)):a("",!0)]))),128)),e("div",me,[e("button",{class:"btn btnSize02 secondaryBtn",onClick:o[9]||(o[9]=s=>c.updateCompanySettings())}," Update ")])])):a("",!0),t.activeTab=="import"?(i(),n("div",he,[ge,e("div",fe,[e("input",{type:"file",name:"tracking",id:"file",ref:"file",accept:".xml",onChange:o[10]||(o[10]=(...s)=>c.attachFile&&c.attachFile(...s))},null,544),e("div",{class:"input-mask",onClick:o[11]||(o[11]=(...s)=>c.inputClick&&c.inputClick(...s))},[e("button",ve,p(c.buttonText),1),e("span",ye,p(c.inputText),1)])]),t.status!=""?(i(),n("section",{key:0,class:"text-center infoBox success mt-10",innerHTML:t.status},null,8,_e)):a("",!0),e("section",be,[e("button",{disabled:t.importing||t.file=="",class:"btn btnSize01 tertiaryBtn bigButton mt-10",onClick:o[12]||(o[12]=(...s)=>c.upload&&c.upload(...s))},[t.importing?(i(),n("div",ke,"Loading...")):(i(),n("span",Te,"Import"))],8,Se)])])):a("",!0),t.activeTab=="application"?(i(),n("div",Ie,[Ee,xe,Ce,e("div",De,[t.printAppOnline?(i(),n("div",Ne,[Ae,u(e("select",{name:"labelPrinter","onUpdate:modelValue":o[14]||(o[14]=s=>t.applicationSettings.labelPrinter=s),id:"labelPrinter",placeholder:"Default system printer"},[Be,(i(!0),n(m,null,h(t.printAppOnline,(s,r)=>(i(),n("option",{key:r,value:s},p(s),9,Le))),128))],512),[[v,t.applicationSettings.labelPrinter]])])):(i(),n("div",Pe,[we,u(e("input",{"onUpdate:modelValue":o[13]||(o[13]=s=>t.applicationSettings.labelPrinter=s),type:"text",id:"labelPrinter",class:"form-control mb-3",placeholder:"Default system printer"},null,512),[[f,t.applicationSettings.labelPrinter]])])),t.printAppOnline?(i(),n("div",Ue,[Fe,u(e("select",{name:"deliveryNotePrinter","onUpdate:modelValue":o[16]||(o[16]=s=>t.applicationSettings.deliveryNotePrinter=s),id:"deliveryNotePrinter",placeholder:"Default system printer"},[Ve,(i(!0),n(m,null,h(t.printAppOnline,(s,r)=>(i(),n("option",{key:r,value:s},p(s),9,He))),128))],512),[[v,t.applicationSettings.deliveryNotePrinter]])])):(i(),n("div",Oe,[Me,u(e("input",{"onUpdate:modelValue":o[15]||(o[15]=s=>t.applicationSettings.deliveryNotePrinter=s),type:"text",id:"deliveryNotePrinter",class:"form-control mb-3",placeholder:"Default system printer"},null,512),[[f,t.applicationSettings.deliveryNotePrinter]])])),e("div",ze,[e("button",{class:"btn btnSize02 secondaryBtn",onClick:o[17]||(o[17]=s=>c.updateApplicationSettings())}," Update ")]),t.userInfo.role>=50?(i(),n("hr",Ye)):a("",!0),t.userInfo.role>=50?(i(),n("div",Ge,Re)):a("",!0)])])):a("",!0),t.activeTab=="downloads"?(i(),n("div",Xe,Ke)):a("",!0),t.activeTab=="devsites"?(i(),n("div",We,qe)):a("",!0)])])])])}const st=S(I,[["render",Qe]]);export{st as default};
//# sourceMappingURL=Settings-q1TGY7dG.js.map
